<html>
  <head>
    <link rel="stylesheet" href="ofmeet.css?v=1"/>
    <script src="/ofmeet/config"></script>
    <script src="ofmeet.js?v=1"></script>
    <script>
		var conn = null;
		var visible = false;
		var joined = false;

		$(document).bind('ofmeet.connected', function (event, connection)
		{
			console.log("ofmeet connected", connection);

			ofmeet.joinRoom("alizecornet", true);
			//ofmeet.VideoLayout.inputDisplayNameHandler("Frank Dodd");
			conn = connection;
			visible = true;
			joined = true;

			setInterval(function()
			{
				//ofmeet.toggleVideo();
				//ofmeet.toggleAudio();
				//ofmeet.toggleScreenSharing();
				//ofmeet.toggleFilmStrip();
				//ofmeet.visible(visible);
				//visible = !visible;

				if (joined)
				{
					ofmeet.leaveRoom();
					joined = false;

				} else {
					ofmeet.joinRoom("alizecornet", true);
					joined = true;
				}

			}, 60000);
		});

		$(document).bind('ofmeet.ready', function ()
		{
			console.log("ofmeet.ready");
			ofmeet.init();
		});

		$(document).ready(function ()
		{
			console.log("document.ready");
			ofmeet.ready();
		});

		$(document).bind('remotevideo.resized', function (event, width, height)
		{
			//console.log("remotevideo.resized", event, width, height);
		});

		$(document).bind('audiomuted.muc', function (event, jid, isMuted)
		{
			//console.log("audiomuted.muc", event, jid, isMuted);
		});

		$(document).bind('videomuted.muc', function (event, jid, isMuted)
		{
			//console.log("videomuted.muc", event, jid, isMuted);
		});

		$(document).bind('displaynamechanged', function (event, jid, displayName, status)
		{
			//console.log("displaynamechanged", event, jid, displayName, status);
		});

		$(document).bind('dominantspeakerchanged', function (event, resourceJid)
		{
			//console.log("dominantspeakerchanged", event, resourceJid);
		});

	    $(document).bind('lastnchanged', function ( event, lastNEndpoints, endpointsEnteringLastN, stream)
	    {
			//console.log("lastnchanged", event, lastNEndpoints, endpointsEnteringLastN, stream);
	    });

	    $(document).bind('videoactive.jingle', function (event, videoelem)
	    {
			//console.log("videoactive.jingle", event, videoelem);
	    });

		$(document).bind('simulcastlayerschanging', function (event, endpointSimulcastLayers)
	    {
			//console.log("simulcastlayerschanging", event, endpointSimulcastLayers);
	    });

		$(document).bind('simulcastlayerschanged', function (event, endpointSimulcastLayers)
	    {
			//console.log("simulcastlayerschanged", event, endpointSimulcastLayers);
	    });

		$(document).bind('startsimulcastlayer', function (event, simulcastLayer)
		{
			//console.log("startsimulcastlayer", event, simulcastLayer);
	    });

		$(document).bind('stopsimulcastlayer', function (event, simulcastLayer)
		{
			//console.log("startsimulcastlayer", event, simulcastLayer);
	    });

		$(document).bind('role.changed.muc', function (event, jid, info, pres)
		{
			//console.log("role.changed.muc", event, jid, info, pres);
	    });

		$(document).bind('local.role.changed.muc', function (event, jid, info, pres)
		{
			//console.log("local.role.changed.muc", event, jid, info, pres);
	    });

		$(document).bind('remotestreamadded.jingle', function (event, data, sid)
		{
			//console.log("remotestreamadded.jingle", event, data, sid);
	    });

		$(document).bind('callincoming.jingle', function (event, sid)
		{
			console.log("callincoming.jingle", event, sid);
	    });

		$(document).bind('conferenceCreated.jingle', function (event, focus)
		{
			console.log("conferenceCreated.jingle", event, focus);
	    });

		$(document).bind('setLocalDescription.jingle', function (event, sid)
		{
			console.log("setLocalDescription.jingle", event, sid);
	    });

		$(document).bind('setLocalDescription.jingle', function (event, sid)
		{
			console.log("setLocalDescription.jingle", event, sid);
	    });

		$(document).bind('iceconnectionstatechange.jingle', function (event, sid, session)
		{
			console.log("iceconnectionstatechange.jingle", event, sid, session);
	    });

		$(document).bind('left.muc', function (event, jid)
		{
			//console.log("left.muc", event, jid);
	    });

		$(document).bind('joined.muc', function (event, jid, info)
		{
			//console.log("joined.muc", event, jid, info);
	    });

		$(document).bind('entered.muc', function (event, jid, info, pres)
		{
			//console.log("entered.muc", event, jid, info, pres);
	    });

		$(document).bind('presence.muc', function (event, jid, info, pres)
		{
			//console.log("presence.muc", event, jid, info, pres);
	    });

		$(document).bind('presence.status.muc', function (event, jid, info, pres)
		{
			//console.log("presence.status.muc", event, jid, info, pres);
	    });

		$(document).bind('kicked.muc', function (event, jid)
		{
			//console.log("kicked.muc", event, jid);
	    });

		$(document).bind('passwordrequired.muc', function (event, jid)
		{
			//console.log("passwordrequired.muc", event, jid);
	    });

		$(document).bind("selectedendpointchanged", function(event, userJid)
		{
			//console.log("selectedendpointchanged", event, userJid);
	    });

		$(document).bind("pinnedendpointchanged", function(event, userJid)
		{
			//console.log("pinnedendpointchanged", event, userJid);
	    });

		$(document).bind('fatalError.jingle', function (event, session, error)
		{
			//console.log("fatalError.jingle", event, session, error);
	    });

		$(document).bind('error.jingle',  function (event, session, error)
		{
			//console.log("error.jingle", event, session, error);
	    });

    </script>
  </head>
  <body>
	<div id="videospace">
		<div id="largeVideoContainer" class="videocontainer">
			<div id="activeSpeaker">
				<img id="activeSpeakerAvatar" src=""/>
				<canvas id="activeSpeakerAudioLevel"></canvas>
			</div>
			<video id="largeVideo" autoplay oncontextmenu="return false;"></video>
		</div>
		<div id="remoteVideos">
			<span id="localVideoContainer" class="videocontainer">
				<span id="localNick" class="nick"></span>
				<span id="localVideoWrapper" />
				<audio id="localAudio" autoplay oncontextmenu="return false;" muted></audio>
				<span class="focusindicator"></span>
			</span>
		</div>
	</div>
  </body>
</html>
